<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scrolling Messages</title>
    <link href="https://fonts.googleapis.com/css2?family=Doto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Adjust these to position the scrolling text box behind the bezel */
            --display-left: 0.5%;
            --display-top: 30%;
            --display-width: 99%;
            --display-height: 35%; /* Increased height for larger text */
        }

        body {
            margin: 0;
            padding: 0;
            background: black;
            overflow: hidden;
        }

        .screen-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .dot-matrix {
            position: absolute;
            left: var(--display-left);
            top: var(--display-top);
            width: var(--display-width);
            height: var(--display-height);
            background-color: black;
            color: #00ff00;
            font-family: "Doto", "Courier New", Courier, monospace;
            font-size: 15vw; /* Increased font size */
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            z-index: 1;
        }

        .scrolling-text {
            white-space: nowrap;
            will-change: transform;
            display: flex;
            animation: scroll-left 20s linear infinite;
        }

        .scrolling-text span {
            padding-right: 50vw; /* Space between duplicated text */
        }

        @keyframes scroll-left {
            from { transform: translateX(100%); }
            to { transform: translateX(-100%); }
        }

        .bezel {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            pointer-events: none;
            z-index: 2;
        }
    </style>
</head>
<body>
    <div class="screen-container">
        <div class="dot-matrix">
            <div class="scrolling-text" id="scrolling">
                <span id="scrolling-text-1">Loading messages...</span>
                <span id="scrolling-text-2">Loading messages...</span>
            </div>
        </div>
        <img class="bezel" src="bezel1.png" alt="Bezel Overlay">
    </div>

    <script>
        async function fetchMessages() {
            const url = "https://script.google.com/macros/s/AKfycbxjkVLzu2uAWbh5IDw4oG1dZhh3FMilInP5qT0RPe62WkFstmLKcqMbCLWhm0-xl4xv/exec";
            try {
                const response = await fetch(url);
                const messages = await response.json();
                const latestMessages = messages; // Get the 3 most recent messages
                
                const textContent = latestMessages.join(" â€¢ ");
                document.getElementById("scrolling-text-1").innerText = textContent;
                document.getElementById("scrolling-text-2").innerText = textContent;
                
                // Calculate scrolling speed based on text length
                const textWidth = document.querySelector(".scrolling-text").scrollWidth / 2;
                const containerWidth = document.querySelector(".dot-matrix").offsetWidth;
                
                const duration = Math.max(10, textWidth / containerWidth * 10); // Ensures at least 10s duration
                document.querySelector(".scrolling-text").style.animation = `scroll-left ${duration}s linear infinite`;
            } catch (error) {
                document.getElementById("scrolling-text-1").innerText = "Failed to load messages.";
                document.getElementById("scrolling-text-2").innerText = "Failed to load messages.";
            }
        }

        fetchMessages();
        setInterval(fetchMessages, 5000);
    </script>
</body>
</html>
